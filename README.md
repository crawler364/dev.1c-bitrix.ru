# Bitrix Course Parser

Парсер для скачивания курсов с сайта dev.1c-bitrix.ru

## Описание

Этот скрипт позволяет автоматически скачивать материалы курсов с платформы обучения 1C-Bitrix. Он извлекает содержимое курса, включая все уроки, и сохраняет их в различных форматах для удобного изучения.

## Возможности

- **Парсинг курсов**: Автоматическое извлечение информации о курсе и его уроках
- **Множественные форматы**: Сохранение в HTML, текстовом формате и JSON с метаданными  
- **Ограничение страниц**: Возможность ограничить количество скачиваемых страниц
- **Умное именование файлов**: Автоматическое создание понятных имен файлов на основе содержимого
- **Обработка ошибок**: Устойчивость к сетевым ошибкам и некорректным страницам
- **Прогресс-индикатор**: Детальная информация о процессе скачивания

## Установка

### Требования

- Python 3.6+
- pip (менеджер пакетов Python)

### Установка зависимостей

```bash
pip install -r requirements.txt
```

Или установить зависимости вручную:

```bash
pip install requests beautifulsoup4 lxml
```

## Использование

### Базовое использование

Скачать весь курс с ID=43:

```bash
python bitrix_course_parser.py
```

### Расширенные опции

#### Ограничить количество страниц

Скачать только первые 5 страниц:

```bash
python bitrix_course_parser.py --limit 5
```

#### Указать свою директорию для сохранения

```bash
python bitrix_course_parser.py --output ./my_course_data
```

#### Указать другой URL курса

```bash
python bitrix_course_parser.py --url "https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=50&INDEX=Y"
```

#### Комбинирование опций

```bash
python bitrix_course_parser.py --url "https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=50&INDEX=Y" --limit 10 --output ./course_50_data
```

### Параметры командной строки

| Параметр | Описание | Значение по умолчанию |
|----------|----------|----------------------|
| `--url` | URL курса для парсинга | `https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=43&INDEX=Y` |
| `--limit` | Максимальное количество страниц | Без ограничений |
| `--output` | Директория для сохранения файлов | `./course_data` |

## Структура выходных файлов

После выполнения скрипт создаст следующую структуру файлов:

```
course_data/
├── course_info.json                    # Общая информация о курсе
├── course_43_course_index.html         # HTML главной страницы курса
├── course_43_course_index.txt          # Текстовое содержимое главной страницы
├── course_43_course_index_metadata.json # Метаданные главной страницы
├── course_43_lesson_123_Урок_1.html    # HTML урока
├── course_43_lesson_123_Урок_1.txt     # Текстовое содержимое урока
├── course_43_lesson_123_Урок_1_metadata.json # Метаданные урока
└── ...
```

### Типы файлов

- **`.html`** - Полное HTML содержимое страницы
- **`.txt`** - Очищенное текстовое содержимое без HTML тегов
- **`.json`** - Метаданные страницы (URL, заголовок, время скачивания)
- **`course_info.json`** - Общая информация о курсе и список всех уроков

## Примеры использования

### Пример 1: Быстрое ознакомление с курсом

Скачать только первые 3 страницы для быстрого ознакомления:

```bash
python bitrix_course_parser.py --limit 3 --output ./preview
```

### Пример 2: Полное скачивание курса

Скачать весь курс в отдельную папку:

```bash
python bitrix_course_parser.py --output ./full_course_43
```

### Пример 3: Скачивание нескольких курсов

```bash
# Курс по основам
python bitrix_course_parser.py --url "https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=43&INDEX=Y" --output ./course_basics

# Курс для разработчиков  
python bitrix_course_parser.py --url "https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=85&INDEX=Y" --output ./course_developers
```

## Особенности работы

### Вежливое скачивание

Скрипт автоматически делает паузы между запросами (1 секунда), чтобы не создавать избыточную нагрузку на сервер.

### Обработка ошибок

- Автоматический повтор при временных сетевых ошибках
- Пропуск недоступных страниц с выводом предупреждения
- Корректная обработка различных кодировок

### Дедупликация

Скрипт автоматически избегает повторного скачивания одинаковых URL.

## Устранение неполадок

### Ошибка "Module not found"

Убедитесь, что установлены все зависимости:

```bash
pip install -r requirements.txt
```

### Ошибки сети

При нестабильном соединении уменьшите количество одновременных запросов или используйте `--limit` для скачивания по частям.

### Недоступные страницы

Некоторые страницы могут требовать авторизации. В таком случае скрипт выведет предупреждение и продолжит работу.

## Правовая информация

Используйте скрипт ответственно и в соответствии с условиями использования сайта dev.1c-bitrix.ru. Скачивайте только те материалы, к которым у вас есть законный доступ.

## Техническая поддержка

При возникновении проблем проверьте:

1. Доступность интернет-соединения
2. Актуальность URL курса
3. Права доступа к директории сохранения файлов
4. Версии установленных зависимостей

## История версий

- **v1.0** - Первоначальная версия с базовой функциональностью парсинга
